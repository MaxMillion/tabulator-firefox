@prefix fresnel:  <http://www.w3.org/2004/09/fresnel#> .
@prefix foaf:     <http://xmlns.com/foaf/0.1/> .
@prefix rdf:      <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xsd:      <http://www.w3.org/2001/XMLSchema#> .
@prefix :         <#>

# -----------------------------------------------
# 1.Fresnel Lenses for FOAF Person
# -----------------------------------------------

:foafPersonDefaultLens rdf:type fresnel:Lens ;
                       fresnel:purpose fresnel:defaultLens ;
                       fresnel:classLensDomain foaf:Person ;
                       fresnel:group :foafGroup ;
                       fresnel:showProperties ( foaf:name 
                                                foaf:surname 
                                                foaf:depiction ) .

:knowsLens rdf:type fresnel:Lens ;
           fresnel:classLensDomain foaf:Person ;
           fresnel:group :foafGroup ;
           fresnel:showProperties ( foaf:name 
                                    foaf:surname
                                    foaf:mbox 
                                    [ rdf:type fresnel:PropertyDescription ;
                                      fresnel:property foaf:knows ;
                                      fresnel:sublens :foafPersonDefaultLens ] ) .
			                      
# -----------------------------------------------
# 2. Fresnel Formats
# -----------------------------------------------

:foafGroup rdf:type fresnel:Group ;
           fresnel:stylesheetLink <http://www.example.org/example.css> . 

:depictFormat rdf:type fresnel:Format ;
              fresnel:propertyFormatDomain foaf:depiction ;
              fresnel:label fresnel:none ;
              fresnel:value fresnel:image ;
              fresnel:valueStyle "imageWithThickBorder"^^fresnel:styleClass ; 
              fresnel:group :foafGroup .
	
:urlFormat rdf:type fresnel:Format ;
           fresnel:propertyFormatDomain foaf:homepage ;
           fresnel:propertyFormatDomain foaf:mbox ;
           fresnel:value fresnel:externalLink ;
           fresnel:labelStyle "basicLabel"^^fresnel:styleClass ;
           fresnel:valueStyle "basicUrl"^^fresnel:styleClass ;
           fresnel:group :foafGroup .
           
------------------------------------------------------           
:foafGroup rdf:type fresnel:Group .
	
:uriFormat rdf:type fresnel:Format ;
           fresnel:propertyFormatDomain foaf:homepage ;
           fresnel:labelStyle "basicLabel"^^fresnel:styleClass ;
           fresnel:valueStyle "basicUri"^^fresnel:styleClass ;
           fresnel:group :foafGroup .           
--------------------------------------------------------           
Example: add commas between property values and a period to the end of a list of homepages.

:formatHomepage rdf:type fresnel:Format ;
                fresnel:propertyFormatDomain foaf:homepage ;
                fresnel:valueFormat [ fresnel:contentAfter ", "^^xsd:string ;
                                      fresnel:contentLast "."^^xsd:string ] ;
                fresnel:valueStyle "basicLabel"^^fresnel:styleClass .

Example: display a missing value message if a foaf:Person has no email address.

:formatMbox rdf:type fresnel:Format ;
            fresnel:propertyFormatDomain foaf:mbox ;
            fresnel:valueFormat [ fresnel:contentNoValue "This person has no email address."^^xsd:string ] .

Example: display an explanation for the knows property.

:formatMbox rdf:type fresnel:Format ;
            fresnel:propertyFormatDomain foaf:knows ;
            fresnel:propertyFormat [ fresnel:contentAfter "That a person knows somebody does mean
                                                              that the other person also knows her."^^xsd:string ] .

Example: display a disclaimer behind all person instances, if the information was found on ex:CrappyWebsite.

:formatMbox rdf:type fresnel:Format ;
            fresnel:instanceFormatDomain "foaf:Person[dc:author/ex:CrappyWebsite]"^^fresnel:fslselector ;
            fresnel:resourceFormat [ fresnel:contentAfter "This information hasn't been verified by us
                                                                  and we don't take any warranty."^^xsd:string ] .

 -------------------------------
 SubLens Example
 Example: the following lens uses a sublens to display a person together with her friends. It also specifies that the :foafPersonDefaultLens must be used to display this person's friends (i.e., foaf:knows property values).

:knowsLens rdf:type fresnel:Lens ;
           fresnel:classLensDomain foaf:Person ;
           fresnel:showProperties ( foaf:name 
                                    foaf:surname
                                    foaf:mbox 
                                    [ rdf:type fresnel:PropertyDescription ;
                                      fresnel:property foaf:knows ;
                                      fresnel:sublens :foafPersonDefaultLens ] ) .

Multiple Sublenses for Mixed Content

For handling properties whose values might belong to various classes, it is possible to specify multiple sublenses. The appropriate lens is chosen based on the domain of lenses declared as possible sublenses.

Example: the ex:activity property might contain a person's projects and hobbies. The following lens specifies that ex:activity values can be displayed either with lens :projectDefaultLens or lens :hobbyDefaultLens. What lens gets chosen depends on each value's type.

:activitiesLens rdf:type fresnel:Lens ;
                fresnel:classLensDomain foaf:Person ;
	        fresnel:showProperties ( foaf:name
                                         [ fresnel:property ex:activity ;
                                           fresnel:sublens :projectDefaultLens ;
                                           fresnel:sublens :hobbyDefaultLens ] ) .

:projectDefaultLens rdf:type fresnel:Lens ;
                    fresnel:classLensDomain ex:Project.

:hobbyDefaultLens rdf:type fresnel:Lens ;
                  fresnel:classLensDomain ex:Hobby.

Recursive Sublensing

Recursive sublens relationships can cause infinite loops. This problem can be addressed by specifying a maximum recursion depth.

Example: the following lens will display a hierarchy of foaf:knows relationships with a maximum path length of 5.

:knowsHierarchyLens rdf:type fresnel:Lens ;
          fresnel:classLensDomain foaf:Person ;
          fresnel:showProperties ( foaf:name
                                   [ rdf:type fresnel:PropertyDescription ;
                                     fresnel:property foaf:knows ;
                                     fresnel:sublens :knowsHierarchyLens ;
                                     fresnel:depth "5"^^xsd:nonNegativeInteger ] ) .

fresnel:use

Using the fresnel:use property together with fresnel:sublens specifies a specific fresnel:Group of lenses and formats which should be used to render the sublens. This allows the usage of multiple fresnel:Groups for rendering different parts of the output. An example of how multiple groups are used to display the content of a sublens as a table is found here.

:foafPersonDefaultLens rdf:type fresnel:Lens ;
                       fresnel:classLensDomain foaf:Person ;
                       fresnel:showProperties ( foaf:name
                                                foaf:surname
                                                [ rdf:type fresnel:PropertyDescription ;
                                                  fresnel:property foaf:knows ;
                                                  fresnel:sublens :friendsLens ;
                                                  fresnel:use :tableGroup ]
                                              ) .

           