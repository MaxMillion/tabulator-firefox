PREFIX pre1: <http://example.com/ns#>
PREFIX pre2: <http://anotherplace.org/rdfdocs#>

SELECT ?a ?b ?c ?d WHERE { 
 <tab> <dev> ?a .
 OPTIONAL { ?a pre2:chatId ?b . }
 OPTIONAL { ?a pre2:friend ?c .
            ?c <name> "Andy" .
	    OPTIONAL { ?c pre2:chatId ?d.
			FILTER ( REGEXP( "^a", ?d ) ) } } 
}
