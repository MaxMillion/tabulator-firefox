<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>

  
  <meta http-equiv="content-type" content="">

  
  
  <title>Developer notes for the Tabulator</title>
  <link rel="stylesheet" href="general.css">
</head>


<body>
<div id="Nav">
</div>
  <script src="Nav.js" type="text/javascript">
  </script>
<div style="float: left; max-width: 80%; margin-left: 10px;">

<p>(Bookmark this page - it isn't in the tabulator help menu)</p>

<h1>Tabulator: Coding Practices</h1>


<p>These are notes for those in the MIT team developing tabulator software. They are not
designed for people developing websites using the tabulator library, who should read the
<a href="Developer.html">developer notes</a>.</p>

<p>These notes are incomplete, and we can learn from experience as the
project goes on. &nbsp;It is important that the administrative stuff
doesn't get in the way of making things work.</p>
<h2>Meeting places</h2>
<p>We will have a meeting at least once a week, to plan what we are
doing and compare notes, in the conference room outside my office.</p>
<p>When you are available to your colleagues, please be on the chat room <a href="irc://irc.freenode.net/dig">irc://irc.freenode.net/dig.</a></p>
<p>The mailing list for the development team is
<a href="https://lists.csail.mit.edu/mailman/listinfo/tabulator">tabulator@csail.mit.edu</a>.  The list has an
<a href="https://lists.csail.mit.edu/mailman/private/tabulator/">archive</a>
accessible (only) to subscribers.
&nbsp;You should be on it. That's a good place
to put things for the record.</p>
<p>People have different styles, some like to work early and some late.
But please make sure you are generall around 12-5 core time,
to get a good overlap.</p>
<p>I tend to be around 9-5 but have lots of other suff happening,
and also some travel time whjen I am not available.
<h2>Background info</h2>
<p><a href="http://esw.w3.org/topic/BootCamp">Semantic Web Boot Camp resources wiki</a>. This has pointers to 
slides</p>
<h2>Javascript</h2>
<p>I haven't found (yet) a reference for good coding practices for
javascript, so here are some notes. &nbsp;We can add to them as we
think of things.</p>
<h3>Indentation</h3>
<p>Please indent scrupulously to exactly four columns. &nbsp;Set your
editor so that it does this.&nbsp; &nbsp; This is because (a) it is
much easier to read project code if it is consistent; (b) it helps
finds errors: sloppy indentation hides errors in languages like
Javascript; and (c) Dan and I have been coding a bunch in Python (which
relies on indentation for the language) and so it makes us much more
comfortable.</p>
<p>Do not use tab characters in the file. &nbsp;Most editors hide the
use of tab (HT, 0x08) characters in the actual file, so that when you
hit the TAB key you go to the next column. Some will, as an option, use
them in the output file, typically to advance to the next column a
multiple of 8. &nbsp;Turn this feature off. This is because if you use
it, there will be editors which don't get it right.</p>
<h3>Comments</h3>
<p>Don't over comment. &nbsp;We don't use a literate programing system
(something which generates beautiful doc from code or vice-verse), so
if someone knows of a good one, we could adopt it. &nbsp;In the mean
time, please put a block comment at the top of a function explaining
what it does. &nbsp;Explain the semantics of the return code, if any.
Explain the semantics of the parameters if it is not blatantly
obvious.&nbsp;</p>
<p>Do leave a short explanation of a single line just to the right using the // comments, when something non-obvious happens.</p>
<p>Code files should at the top say where they came from on the web --
the URL on the tabulator site -- and have the licence, which is
currently W3C software licence, which is open source.</p>
<h3>Identifiers</h3>
<p> </p>
<p>Javascript has a terrible issue with global identifiers, in that (a)
there are no &nbsp;file-global identifiers and (b) you can accidentally
end up using a global identifier by forgetting to declare a local one.</p>
<p>Where you have to, I suggest following a convention Ruth uses in the
sources module, to start each one with the module name and an underscore.</p>
<p>For the rest of the name, I prefer camelCase to under_score names but I'm not fussy -- we could vote</p>
<h3>JavaScript Lint (JSL)</h3>
<p>Please use <a href="http://www.javascriptlint.com/">jsl</a>
before checking code in. &nbsp; There is a config file
&nbsp;test/jsl.conf &nbsp;which is appropriate. &nbsp;This is most
useful for finding undeclared variables.</p>
<h3>Line Length</h3>
<p>Please keep to line length of 80. &nbsp;Some people like to keep
editors to 80 columns, to get more on the screen. This is from python
practice.&nbsp; &nbsp; This is not an ultra-strict rule -- go over if
the result would be horrendous or impossible.</p>
<h2>HTML</h2>
<p>HTML pages which are part of the tabulator itself or part of the
documentation should be XHTML, that is they must be valid XML files,
using the xHTML vocabulary.</p>
<p>Documentation pages should use the project CSS files.</p>
<h2>Source Code Management</h2>
<p>We use SVN, with authentication over http. &nbsp;SVN, like
the well-known CVS, works by letting you code in parallel, and then
tries to merge the changes. &nbsp;This is generally very effective.</p>
<p>If you are at MIT you will have a kerberos account with Athena.
We'll use your Athena principal name as your svn username (but
<em>not</em> your Athena password).
Make sure you have been given access to the svn repository. Chris
Hanson and Ralph Swick can do this for you.  Then
check out the tabulator source tree into a new local working directory:</p>
<p style="font-family: monospace;">svn checkout https://username@svn.csail.mit.edu/dig/2005/ajar/ajaw</p>
<p>From then on, SVN keeps track of where it came from (<tt>svn info</tt> or <span style="font-family: monospace;">grep url= .svn/entries</span> will tell you)</p>
<p>Make a trivial change of a character to a file and make sure you can check it back in</p>
<p style="font-family: monospace;">svn commit -m "Just testing"</p>
<p>You always have to give a -m message to svn commit: please&nbsp; </p>
<h3>Check in often</h3>
<p>Several times a day is fine. It is good to work incremntally. An effective loop is:</p>
<ol>
  <li>Make a test file which would demonstrate the feature you want to
code. &nbsp;(Making the test first is useful later on as you try to
debug, and also it often sharpens your idea of what it is exactly you
are doing)</li>
  <li>Code it up, in the simplest cleanest way you can</li>
  <li>Check that it works, debugging as necessary.</li>
  <li>Check that the JSL lint is still clean</li>
  <li>svn update &nbsp; to get anyone else's changes they have done in the mean time</li>
  <li>(If they have, a file may be marked C in the update output and you will have to fix a conflict)</li>
  <li>Check the common tests work for any things which you could have
affected. &nbsp;The latest version in SVN should be working at any one
point. </li>
  <li>svn commit -m "which feature or bug fix you just did"</li>
</ol>
<p>You have made a contribution. &nbsp;Thank you!</p>
<p>When you iterate to complete the feature, or add new features, then make sure you add tests for each one.</p>
<p>This is much more effective if one has automatic tests. &nbsp;We are working on that -- bright ideas welcome.</p>
<p>Check in often because</p>
<ul>
  <li>You will have a backup</li>
  <li>Others will see what you have done and be able to use it</li>
  <li>Early review by other people is more useful than late, when it may be too late to change</li>
  <li>Early synchronization with other's work dramatically reduces the amount of conflicts you have to figure out.</li>
</ul>
<h3>Major global changes</h3>
<p>If you need to do a global rewrite, such as a refactoring of the
code, or a global change of the names of things, then you must sync up
with all the other developers, so they can get their changes in, let
you do yours, and then start working with the new version. Obviously
this takes negotiation. &nbsp;Talk to me first, too.&nbsp;</p>
<h2>Releases</h2>
<p>The version in http://dig.csail.mit.edu/ is alpha-test level.
&nbsp;It should work, but it is bleeding edge. &nbsp;There is a version
at http://www.w3.org/2005/ajar/ which is more like a beta-test level.
&nbsp;There is no non-test.</p>
<p>When we think we have suitable amount of extra functionality, then
we should copy the alpha to the beta version, wrap it up in a tar file
for those who need that. &nbsp;Currently Dan, Ralph and Tim are the
only ones who have w3.org write access. The makefile has the code to do
this.&nbsp;</p>
<ol>
  <li>Make sure the list of files in the release is up to date in the Makefile.</li>
  <li>Run make release. &nbsp;This rsync's the files to the target directory, and runs make release2 there.</li>
  <li>Check for all new files that the ACLs are set to make them publicly readable.</li>
</ol>
<p></p>
<hr style="width: 100%; height: 2px;">
<p></p>
<p>Tim BL<br />
<small>Updated: $Date: 2007-05-22 14:14:29 -0400 (Tue, 22 May 2007) $ by $Author: timbl $</small></p>
</body>
</html>
